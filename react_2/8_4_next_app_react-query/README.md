#### SSR Next.js : ReactQuery

## –ª—É—á—à–µ –∏ —á–µ–º —Ö—É–∂–µ –ø–æ–¥—Ö–æ–¥ —Å getStaticProps (ISR) –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å useQuery –∏ getServerSideProps.

‚úÖ –ü–æ–¥—Ö–æ–¥ —Å getStaticProps + ISR

| –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ                           | –û–±—ä—è—Å–Ω–µ–Ω–∏–µ                                                                                  |
|----------------------------------------|---------------------------------------------------------------------------------------------|
| ‚ö° **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**              | –î–∞–Ω–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä—è–º–æ –≤ HTML (—Å–µ—Ä–≤–µ—Ä–æ–º –≤–æ –≤—Ä–µ–º—è –±–∏–ª–¥–∞ –∏–ª–∏ ISR), –±—Ä–∞—É–∑–µ—Ä –∏—Ö —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç |
| üåç **–õ—ë–≥–∫–∏–π –±—ç–∫–µ–Ω–¥**                   | –ù–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞—Ö–æ–¥–µ, —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª–∏–¥–∞—Ü–∏–∏                      |
| üßä **–†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ JavaScript**         | SEO –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å ‚Äî –¥–∞–Ω–Ω—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–∞–∂–µ –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ JS                                |
| üí∞ **–î–µ—à–µ–≤–ª–µ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ** (–Ω–∞ Vercel) | –ú–µ–Ω—å—à–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ = –º–µ–Ω—å—à–µ —Ä–µ–Ω–¥–µ—Ä–æ–≤ = –º–µ–Ω—å—à–µ –∑–∞—Ç—Ä–∞—Ç                              |

| –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫                               | –ü–æ—á–µ–º—É —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π                                                 |
|------------------------------------------|---------------------------------------------------------------------------------|
| üïí **–ù–µ—Ç "–∂–∏–≤–æ–≥–æ" –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**    | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥–ª–∏ —É—Å—Ç–∞—Ä–µ—Ç—å (–¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ `revalidate`)  |
| ‚õî **–ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ—Ñ–µ—Ç—á–∞**        | React Query –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –Ω–µ—Ç —Ñ–æ–∫—É—Å–∞/–Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è     |
| üß† **–ù—É–∂–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `getStaticPaths`** | –ù—É–∂–Ω–æ –∑–∞—Ä–∞–Ω–µ–µ –∏–ª–∏ –Ω–∞ –ª–µ—Ç—É –∑–Ω–∞—Ç—å –≤—Å–µ `id`, –∏–Ω–∞—á–µ –±—É–¥–µ—Ç 404 –∏–ª–∏ "blocking" —Ä–µ–Ω–¥–µ—Ä |

‚úÖ –ü–æ–¥—Ö–æ–¥ —Å getServerSideProps + useQuery

| –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ                                | –û–±—ä—è—Å–Ω–µ–Ω–∏–µ                                                                          |
|---------------------------------------------|-------------------------------------------------------------------------------------|
| üü¢ **–î–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ**                 | –ö–∞–∂–¥—ã–π –∑–∞—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–µ–ª–∞–µ—Ç –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä                              |
| üîÅ **–†–∞–±–æ—Ç–∞–µ—Ç —Ä–µ—Ñ–µ—Ç—á –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ/–Ω–∞–≤–∏–≥–∞—Ü–∏–∏** | –ë–ª–∞–≥–æ–¥–∞—Ä—è React Query                                                               |
| üß© **–ì–∏–±–∫–∞—è –ª–æ–≥–∏–∫–∞, –±–æ–ª—å—à–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–∞**    | –ú–æ–∂–Ω–æ —É—Å–ª–æ–≤–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å, –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à React Query –∏ —Ç.–ø. |

| –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫                                  | –ü–æ—á–µ–º—É —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π                                                                    |
|---------------------------------------------|----------------------------------------------------------------------------------------------------|
| üê¢ **–î–æ–ª—å—à–µ –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**             | –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –æ—Ç–¥–∞—ë—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, —Å–Ω–∞—á–∞–ª–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ, –ø–æ—Ç–æ–º HTML                         |
| üìâ **–ü–ª–æ—Ö–æ–π SEO, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –¥–æ–∂–¥–∞–ª–∏—Å—å** | –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å –∏–ª–∏ –¥–æ–ª–≥–æ –≥—Ä—É–∑–∏—Ç—Å—è ‚Äî HTML –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π –∏–ª–∏ —Å–ª–æ–º–∞–Ω–Ω—ã–π                    |
| üì° **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä/API**               | –ö–∞–∂–¥—ã–π –∑–∞—Ö–æ–¥ = –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∫ API (–º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –∫—ç—à–æ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤) |
|                                             |                                                                                                    |

üéØ –ö–æ–≥–¥–∞ —á—Ç–æ –≤—ã–±–∏—Ä–∞—Ç—å?

| –°–∏—Ç—É–∞—Ü–∏—è                                    | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥                    |
|---------------------------------------------|-------------------------------------------|
| –ö–æ–Ω—Ç–µ–Ω—Ç —Ä–µ–¥–∫–æ –º–µ–Ω—è–µ—Ç—Å—è                      | `getStaticProps` + ISR                    |
| –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∞–∂–µ–Ω –¥–ª—è SEO                       | `getStaticProps` –∏–ª–∏ `getServerSideProps` |
| –ù—É–∂–Ω—ã –æ—á–µ–Ω—å —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ (—Å—Ç–∞—Ç—É—Å, –º–µ—Ç—Ä–∏–∫–∏) | `getServerSideProps` –∏–ª–∏ `CSR + useQuery` |
| –¢—Ä–µ–±—É–µ—Ç—Å—è –æ—Ñ—Ñ–ª–∞–π–Ω-–∫—ç—à –∏ –∂–∏–≤–æ–π —Ä–µ—Ñ–µ—Ç—á        | `useQuery` –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ                     |
| –ö–æ–Ω—Ç–µ–Ω—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –ª–µ—Ç—É   | `getServerSideProps`                      |

üí° –ö–æ–º–±–æ-–≤–∞—Ä–∏–∞–Ω—Ç (—á–∞—Å—Ç–æ –ª—É—á—à–∏–π):
SSR (getServerSideProps) + useQuery —Å initialData
–î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å —Å–µ—Ä–≤–µ—Ä–∞ ‚Äî –±—ã—Å—Ç—Ä–æ –∏ —Å–≤–µ–∂–æ
React Query –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç ‚Äî –∏ –ø–æ—Ç–æ–º –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ/–Ω–∞–≤–∏–≥–∞—Ü–∏–∏
–¢–∞–∫ —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å –ª—É—á—à–µ–µ –∏–∑ –æ–±–æ–∏—Ö –º–∏—Ä–æ–≤.

üìå –ì–ª–∞–≤–Ω–æ–µ –∑–∞–ø–æ–º–Ω–∏—Ç—å

| –ß—Ç–æ                             | –ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç           |
|---------------------------------|--------------------------|
| `prefetchQuery()`               | –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ               |
| `dehydrate()`                   | –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ               |
| JSON –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ `<script>` | –≤ HTML –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞        |
| `Hydrate` —á–∏—Ç–∞–µ—Ç JSON           | –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –≤ `_app.tsx` |
| `QueryClient` –∂–∏–≤–æ–π             | —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –∂–∏–≤ –±—Ä–∞—É–∑–µ—Ä  |


